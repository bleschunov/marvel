"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[573],{9661:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(3535),a=r(184),c=function(e){return(0,a.jsx)("img",{src:n,alt:"error",className:"error ".concat(e.className)})}},6573:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var n=r(885),a=r(2791),c=r(4270),s=r(5671),i=r(3144),o=r(136),u=r(3668),l=r(9661),h=r(184),m=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return(0,i.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?(0,h.jsx)(l.Z,{}):this.props.children}}]),r}(a.Component),d=m,f=r(5861),p=r(7757),_=r.n(p),x=r(8813),v=r(5257),j=(r(2290),function(e){var t=(0,a.useState)({}),r=(0,n.Z)(t,2),c=r[0],s=r[1],i=(0,x.Z)(),o=i.process,u=i.getRandomCharacter;function l(){return m.apply(this,arguments)}function m(){return(m=(0,f.Z)(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,u();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,a.useEffect)(l,[]);return(0,h.jsxs)("div",{className:"randomChar ".concat(e.className),children:[(0,h.jsx)("div",{className:"randomChar__container randomChar__container_light randomChar__container_first",children:(0,v.Z)(o,(function(e){var t=e.name,r=e.thumbnail,n=e.objectFit,a=e.description,c=e.homepage,s=e.wiki;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("img",{src:r,alt:t,className:"randomChar__avatar",style:{objectFit:n}}),(0,h.jsxs)("div",{className:"randomChar__info",children:[(0,h.jsx)("h2",{className:"randomChar__header",children:t}),(0,h.jsx)("p",{className:"randomChar__text",children:a}),(0,h.jsxs)("div",{className:"randomChar__buttonGroup",children:[(0,h.jsx)("a",{href:c,className:"button button_red",children:"homepage"}),(0,h.jsx)("a",{href:s,className:"button button_gray",children:"wiki"})]})]})]})}),c)}),(0,h.jsxs)("div",{className:"randomChar__container randomChar__container_dark randomChar__container_second",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"randomChar__title",children:"Random character for today!"}),(0,h.jsx)("h2",{className:"randomChar__title",children:"Do you want to get to know him better?"})]}),(0,h.jsx)("h2",{className:"randomChar__title",children:"Or choose another one"}),(0,h.jsx)("button",{onClick:l,className:"button button_red",children:"try it"})]})]})}),g=r(2982),b=r(6674),N=r(5660),y=function(e){var t=(0,a.useState)([]),r=(0,n.Z)(t,2),c=r[0],s=r[1],i=(0,a.useState)(500),o=(0,n.Z)(i,2),u=o[0],l=o[1],m=(0,a.useState)(!1),d=(0,n.Z)(m,2),f=d[0],p=d[1],_=(0,x.Z)(),j=_.process,y=_.getCharacters;function C(e){y(e,u).then((function(t){return function(e,t){s((function(t){return[].concat((0,g.Z)(t),(0,g.Z)(e))})),l((function(e){return e+t})),p(e.length<9)}(t,e)}))}(0,a.useEffect)((function(){return C(9)}),[]);var k=(0,a.useRef)([]);function w(e){k.current.forEach((function(e){return e.classList.remove("charList__card_selected")})),k.current[e].classList.add("charList__card_selected")}var Z=(0,a.useMemo)((function(){return function(t){return t.map((function(t,r){var n=t.id,a=t.thumbnail,c=t.name,s={objectFit:null};return s.objectFit="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a?"contain":"cover",(0,h.jsx)(b.Z,{timeout:500,classNames:"charList__card",children:(0,h.jsxs)("li",{tabIndex:"0",onClick:function(){w(r),e.onSelectChar(n)},onKeyPress:function(t){"Enter"===t.key&&(w(r),e.onSelectChar(n))},className:"charList__card",ref:function(e){return k.current[r]=e},children:[(0,h.jsx)("img",{src:a,alt:c,className:"charList__avatar",style:s}),(0,h.jsx)("h3",{className:"charList__header",children:c})]})},n)}))}(c)}),[c]);return(0,h.jsxs)("section",{className:"charList ".concat(e.className),children:[(0,h.jsx)("ul",{className:"charList__grid",children:(0,h.jsx)(N.Z,{component:null,children:Z})}),(0,h.jsx)("div",{className:"charList__footer",children:(0,v.Z)(j,(function(){return f?null:(0,h.jsx)("button",{onClick:function(){return C(9)},className:"button button_red button_long",children:"load more"})}))})]})},C=function(e){var t=e.className;return(0,h.jsxs)("section",{className:"infoSkeleton ".concat(t),children:[(0,h.jsx)("div",{className:"infoSkeleton__title",children:"Please select a character to see information"}),(0,h.jsxs)("div",{className:"infoSkeleton__header",children:[(0,h.jsx)("div",{className:"infoSkeleton__circle"}),(0,h.jsx)("div",{className:"infoSkeleton__rect"})]}),(0,h.jsx)("div",{className:"infoSkeleton__rect infoSkeleton__rect_wide"}),(0,h.jsx)("div",{className:"infoSkeleton__rect infoSkeleton__rect_wide"}),(0,h.jsx)("div",{className:"infoSkeleton__rect infoSkeleton__rect_wide"})]})},k=r(3504),w=function(e){var t=(0,a.useState)({}),r=(0,n.Z)(t,2),c=r[0],s=r[1],i=(0,x.Z)(),o=i.process,u=i.getCharacter;function l(){return(l=(0,f.Z)(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,u(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,a.useEffect)((function(){return function(e){return l.apply(this,arguments)}(e.selectedCharId)}),[e.selectedCharId]);var m=function(e){var t=e.comics,r=[];if(t&&0!==t.length)for(var n=0;n<t.length&&10!==n;n++){var a=t[n].resourceURI.match(/\d+$/);r.push((0,h.jsx)("li",{className:"charInfo__item",children:(0,h.jsx)(k.rU,{to:"/marvel/comics/".concat(a),children:t[n].name})},n))}else r=(0,h.jsx)("li",{children:"There are no comics with this character"});return r};return(0,h.jsx)("section",{className:"charInfo ".concat(e.className),children:(0,v.Z)(o,(function(e){var t=e.name,r=e.thumbnail,n=e.description,a=e.homepage,c=e.wiki,s=e.comics,i={objectFit:null};return i.objectFit="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===r?"contain":"cover",(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("img",{src:r,alt:t,style:{style:i},className:"charInfo__avatar"}),(0,h.jsxs)("div",{className:"charInfo__header",children:[(0,h.jsx)("h3",{className:"charInfo__name",children:t}),(0,h.jsx)("a",{href:a,className:"button button_red charInfo__button",children:"homepage"}),(0,h.jsx)("a",{href:c,className:"button button_gray charInfo__button",children:"wiki"})]}),(0,h.jsx)("p",{className:"charInfo__descr",children:n}),(0,h.jsx)("div",{className:"charInfo__listHeader",children:"Comics:"}),(0,h.jsx)("ul",{className:"charInfo__list",children:(0,h.jsx)(m,{comics:s})})]})}),c)})},Z=r(1091),S=r(5705),F=r(132),I=function(e){var t=e.className,r=(0,a.useState)((0,h.jsx)(h.Fragment,{})),c=(0,n.Z)(r,2),s=c[0],i=c[1],o=(0,a.useState)(!1),u=(0,n.Z)(o,2),l=u[0],m=u[1],d=(0,x.Z)().getCharacterByName;return(0,h.jsx)(S.J9,{initialValues:{query:""},validationSchema:F.Ry({query:F.Z_().required("The field is required")}),onSubmit:function(e){d(e.query).then((function(e){m(!0),i((0,h.jsxs)("div",{className:"searchForm__message searchForm__message_success",children:["There is! Visit ",e.name," page?",(0,h.jsx)(k.rU,{to:e.id,className:"button button_gray searchForm__link",children:"to page"})]}))})).catch((function(){m(!1),i((0,h.jsx)("div",{className:"searchForm__message searchForm__message_error",children:"The character was not found. Check the name and try again"}))}))},children:(0,h.jsxs)(S.l0,{className:"searchForm ".concat(t),children:[(0,h.jsx)("h3",{className:"searchForm__header",children:"Or find a character by name:"}),(0,h.jsx)("div",{children:(0,h.jsx)(S.gN,{className:"searchForm__input",name:"query",type:"text",placeholder:"Enter name",autoComplete:"off"})}),(0,h.jsx)("button",{className:"button button_red searchForm__button",type:"submit",children:"find"}),(0,h.jsx)(S.Bc,{name:"query",component:"div",className:"searchForm__message searchForm__message_error"}),(0,h.jsx)(Z.Z,{mode:"out-in",children:(0,h.jsx)(b.Z,{timeout:500,classNames:"searchForm__message",children:s},l)})]})})},L=r(6114),E=function(){var e=(0,a.useState)(null),t=(0,n.Z)(e,2),r=t[0],s=t[1];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(c.Z,{children:[(0,h.jsx)("meta",{name:"description",content:"Marvel information portal"}),(0,h.jsx)("title",{children:"Marvel information portal"})]}),(0,h.jsx)(d,{children:(0,h.jsx)(j,{className:"app__randomChar"})}),(0,h.jsxs)("div",{className:"app__charContent",children:[(0,h.jsx)(d,{children:(0,h.jsx)(y,{onSelectChar:function(e){s(e)},className:"app__charList"})}),(0,h.jsxs)("div",{className:"app__sidebar",children:[(0,h.jsx)(d,{children:r?(0,h.jsx)(w,{selectedCharId:r,className:"app__charInfo"}):(0,h.jsx)(C,{className:"app__charInfo"})}),(0,h.jsx)(d,{children:(0,h.jsx)(I,{className:"app__searchForm"})})]})]}),(0,h.jsx)("img",{src:L,alt:"vision",className:"app__vision"})]})}},8813:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(5861),a=r(7757),c=r.n(a),s=r(3329),i=r.n(s),o=r(885),u=r(2791),l=function(){var e=(0,u.useState)("waiting"),t=(0,o.Z)(e,2),r=t[0],a=t[1];function s(){return(s=(0,n.Z)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a("fetching"),e.prev=1,e.next=4,fetch(t);case 4:if((r=e.sent).ok||404===r.status){e.next=7;break}throw new Error("Could not fetch ".concat(t,", status is ").concat(r.status));case 7:return a("waiting"),e.next=10,r.json();case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),a("error");case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}return{getResource:function(e){return s.apply(this,arguments)},process:r}},h=function(){var e=l(),t=e.getResource,r=e.process,a="https://gateway.marvel.com:443/v1/public/",s="501c32c8096d96aabefe16305a1b4371",o=i()("1cf3a965c94a82a96ab36e31940ad7a43fba9af96"+s),u="?apikey=".concat(s,"&ts=").concat("1","&hash=").concat(o);function h(){return(h=(0,n.Z)(c().mark((function e(r){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(a,"characters/").concat(r+u));case 2:return n=e.sent,e.abrupt("return",v(n.data.results[0]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,n.Z)(c().mark((function e(r){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(a,"characters?name=").concat(r,"&apikey=").concat(s));case 2:if(!(n=e.sent).data.results[0]){e.next=7;break}return e.abrupt("return",v(n.data.results[0]));case 7:throw new Error;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return(f=(0,n.Z)(c().mark((function e(){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Math.floor(400*Math.random()+1011e3),e.prev=1,e.next=4,t("".concat(a,"characters/").concat(r+u));case 4:if(404!==(n=e.sent).code){e.next=7;break}throw new Error("The character with id ".concat(r," does not exist"));case 7:return e.abrupt("return",v(n.data.results[0]));case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,d();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function p(){return(p=(0,n.Z)(c().mark((function e(r,n){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(a,"characters").concat(u,"&limit=").concat(r,"&offset=").concat(n));case 2:return s=e.sent,e.abrupt("return",s.data.results.map((function(e){return v(e)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=(0,n.Z)(c().mark((function e(r){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(a,"comics/").concat(r+u));case 2:return n=e.sent,e.abrupt("return",j(n.data.results[0]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=(0,n.Z)(c().mark((function e(r,n){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(a,"comics").concat(u,"&limit=").concat(r,"&offset=").concat(n));case 2:return s=e.sent,e.abrupt("return",s.data.results.map((function(e){return j(e)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){var t=e.id,r=e.name,n=e.description,a=e.thumbnail,c=e.urls,s=e.comics;return n=n.length>230?n.slice(0,228)+"...":n,{id:String(t),name:r,description:n||"Description is not available :(",thumbnail:a.path+"."+a.extension,homepage:c[0].url,wiki:c[0].url,comics:s.items}}function j(e){var t=e.id,r=e.title,n=e.prices,a=e.thumbnail,c=e.description,s=e.textObjects,i=e.pageCount;return{id:String(t),price:n[0].price+"$",description:c||"Description is not available :(",language:s.language?"Language: "+s.language:null,thumbnail:a.path+"."+a.extension,title:r,pageCount:i?i+" pages":null}}return{process:r,getCharacter:function(e){return h.apply(this,arguments)},getCharacterByName:function(e){return m.apply(this,arguments)},getRandomCharacter:d,getCharacters:function(e,t){return p.apply(this,arguments)},getComic:function(e){return _.apply(this,arguments)},getComics:function(e,t){return x.apply(this,arguments)}}}},5257:function(e,t,r){var n=r(8683),a=r(108),c=r(9661),s=r(184);t.Z=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(e){case"waiting":return(0,s.jsx)(t,(0,n.Z)({},r));case"fetching":return(0,s.jsx)(a.Z,{});case"error":return(0,s.jsx)(c.Z,{})}}},2290:function(){},3535:function(e,t,r){e.exports=r.p+"static/media/error.42292aa12b6bc303ce99.gif"},6114:function(e,t,r){e.exports=r.p+"static/media/vision.067d4ae1936d64a577ce.png"}}]);
//# sourceMappingURL=573.c52255d1.chunk.js.map